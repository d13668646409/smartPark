on: 
  push: 
    branches: [main]
permissions:
  contents: write
jobs: 
  build: 
   name: 'build工作'
   runs-on: ubuntu-latest

   steps: 
     - name: 读取仓库内容
       uses: actions/checkout@v4
      
     - name: 安装nodejs
       uses: actions/setup-node@v2
       with: 
        node-version: "22.x"  
      
     - name: 安装依赖和项目打包
       run: 
         npm install
         npm run build
         
     - name: List files in build directory
       run: ls build  # 确保这个命令在 build 目录存在时能正确运行

     - name: 部署
       uses: JamesIves/github-pages-deploy-action@v4
       with: 
        branch: gh-pages
        folder: build
        clean: true
        token: ${{secrets.TOKEN}}
   
